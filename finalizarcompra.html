<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Finalizar Compra | Casa Franchi</title>
  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --naranja: #ffe600;
      --negro:   #111;
      --gris-claro: #f4f4f4;
      --gris-oscuro: #666;
      --blanco:  #fff;
      --font: 'Montserrat', sans-serif;
      --radius: .5rem;
      --trans: .3s ease;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: var(--font);
      background: var(--gris-claro);
      color: var(--negro);
      line-height: 1.5;
    }
    a { text-decoration:none; color:inherit; }
    img { display:block; max-width:100%; }

    /* NAVBAR */
    /* NAVBAR NUEVO TIPO MERCADO LIBRE */
.navbar {
  padding: 0.75rem 1rem;
  font-family: 'Montserrat', sans-serif;
  z-index: 1000;
}
.navbar input.form-control {
  height: 45px;
  font-size: 0.95rem;
}
.navbar .btn-light {
  height: 45px;
}
.navbar .bi {
  vertical-align: middle;
}



    /* T√çTULO */
    .page-title {
      text-align:center;
      font-size:2.5rem; font-weight:700;
      margin:2rem 0 1rem;
    }

    /* TABLA DE ITEMS */
    .checkout-table {
      background: var(--blanco);
      border-radius: var(--radius);
      box-shadow:0 4px 12px rgba(0,0,0,0.05);
      overflow:hidden;
      margin-bottom:1.5rem;
    }
    .checkout-table table {
      margin:0;
    }
    .checkout-table thead {
      background: var(--naranja);
      color: var(--blanco);
    }
    .checkout-table th,
    .checkout-table td {
      vertical-align: middle!important;
      padding: .75rem 1rem!important;
    }
    .checkout-table tbody tr:hover {
      background: rgba(241,90,36,0.05);
    }
    .item-img {
      width: 60px; height: 60px;
      object-fit: cover; border-radius: var(--radius);
    }

    /* RESUMEN */
    .summary-card {
      background: var(--blanco);
      border-radius: var(--radius);
      box-shadow:0 4px 16px rgba(0,0,0,0.05);
      padding:1.5rem;
      position: sticky; top: 20px;
    }
    .summary-card h5 {
      font-size:1.25rem; font-weight:600;
      margin-bottom:1rem;
    }
    .summary-list {
      list-style:none; padding:0; margin:0 0 1.5rem;
    }
    .summary-list li {
      display:flex; justify-content:space-between;
      margin-bottom:.75rem; font-weight:500;
    }
    .summary-list li span:last-child {
      font-weight:700;
    }
    .btn-confirm {
      width:100%;
      background: var(--naranja);
      color: var(--negro);
      font-weight:600;
      padding:.75rem;
      border:none;
      border-radius: var(--radius);
      transition: background var(--trans);
    }
    .btn-confirm:hover {
      background: #db500f;
    }

    /* FOOTER */
    footer {
      background: var(--negro);
      color: var(--gris-claro);
      padding:2rem; margin-top:2rem;
    }
    footer h5 { font-weight:600; margin-bottom:.5rem; }
    footer a { color: var(--naranja); transition: color var(--trans); }
    footer a:hover { color: #fff; }

    @media(max-width:768px){
      .search-bar input { width:120px; }
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <!-- NAVBAR ESTILO MERCADO LIBRE -->
  <nav class="navbar navbar-expand-lg shadow-sm" style="background-color: #ffe600;">
    <div class="container align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="/index.html">
        <img src="./logo4.png" alt="Logo" style="height: 75px;">
      </a>
      <form class="d-flex flex-grow-1 mx-3 position-relative">
        <input id="searchInput" class="form-control rounded-start border-0 shadow-sm" type="search" placeholder="Buscar productos, marcas y m√°s..." aria-label="Search" autocomplete="off">
        <button class="btn btn-light border-start-0 rounded-end" type="submit"><i class="bi bi-search"></i></button>
        <div id="searchResults" class="position-absolute bg-white shadow rounded mt-1 w-100 z-3 d-none" style="top: 100%; max-height: 300px; overflow-y: auto;"></div>
      </form>

      <div class="d-flex align-items-center gap-3">
        <a href="#" class="text-dark fw-semibold text-decoration-none">Categor√≠as</a>
        <a href="#" class="text-dark"><i class="bi bi-person fs-5"></i></a>
        <a href="#" class="text-dark"><i class="bi bi-cart fs-5"></i></a>
      </div>
    </div>
  </nav>

  <!-- T√çTULO -->
  <h1 class="page-title">Finalizar Compra</h1>

  <div class="container">
    <div class="row gx-4">
      <!-- TABLA DE PRODUCTOS -->
      <div class="col-lg-8">
        <div class="checkout-table">
          <table class="table mb-0">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Marca</th>
                <th>Detalle</th>
                <th>Cant.</th>
                <th>Precio</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody id="checkout-items">
              <!-- filas inyectadas v√≠a JS -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- RESUMEN DE PAGO -->
      <div class="col-lg-4">
        <div class="summary-card">
          <h5>Resumen de Compra</h5>
          <ul class="summary-list">
            <li>Subtotal <span id="subtotal">$0</span></li>
            <li>Env√≠o <span id="envio">Gratis</span></li>
            <li>Total <span id="total">$0</span></li>
          </ul>
          <button class="btn-confirm" onclick="confirmarPedido()">Confirmar Compra</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <div class="row text-center text-md-start gy-4">
        <div class="col-md-4">
          <h5>Casa Franchi</h5>
          <p>Distribuidor oficial de herramientas profesionales en Argentina.</p>
        </div>
        <div class="col-md-4">
          <h5>Contacto</h5>
          <p>üìû 11 2233 4455<br>üìß info@mundofranchi.com</p>
        </div>
        <div class="col-md-4">
          <h5>S√≠guenos</h5>
          <p><a href="#">Instagram</a> | <a href="#">Facebook</a> | <a href="#">WhatsApp</a></p>
        </div>
      </div>
      <div class="text-center mt-4"><small>&copy; 2025 Casa Franchi. Todos los derechos reservados.</small></div>
    </div>
  </footer>

  <!-- L√ìGICA JS -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cart = JSON.parse(localStorage.getItem('carrito') || '[]');
      const $tbody = document.getElementById('checkout-items');
      let subtotal = 0;

      if (cart.length === 0) {
        $tbody.innerHTML = '<tr><td colspan="6" class="text-center py-4">Tu carrito est√° vac√≠o.</td></tr>';
      } else {
        cart.forEach(p => {
          // extraer datos
          const title = p.producto || 'Sin nombre';
          const brand = p.marca || '-';
          const detail = p.caracteristica || '';
          const img64 = p.imagen1_base64 || '';
          const price = Math.round(p.csi_cem || p.costo || 0);
          subtotal += price;
          const row = `
            <tr>
              <td>
                <div class="d-flex align-items-center">
                  <img src="data:image/jpeg;base64,${img64}" alt="${title}" class="item-img me-2">
                  <div>${title}</div>
                </div>
              </td>
              <td>${brand}</td>
              <td>${detail}</td>
              <td>1</td>
              <td>$${price.toLocaleString()}</td>
              <td>$${price.toLocaleString()}</td>
            </tr>`;
          $tbody.insertAdjacentHTML('beforeend', row);
        });
      }

            envioValue = 0,
            totalValue = subtotal + envioValue;

      document.getElementById('subtotal').textContent = '$' + subtotal.toLocaleString();
      document.getElementById('envio').textContent   = envioValue === 0 ? 'Gratis' : '$' + envioValue.toLocaleString();
      document.getElementById('total').textContent   = '$' + totalValue.toLocaleString();
    });

    function confirmarPedido() {
      // Aqu√≠ podr√≠as llamar a tu API o similar
      window.location.href = 'checkout.html';
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
